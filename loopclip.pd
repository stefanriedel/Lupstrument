#N canvas 65 81 1215 719 10;
#X obj 316 214 sel 1 0;
#X msg 272 566 stop;
#X obj 174 484 *~;
#X obj 105 105 tgl 25 0 empty empty empty 17 7 0 25 -262144 -1 -1 0
1;
#X obj 760 143 spigot;
#X obj 174 595 tabwrite~ \$0-clip;
#X obj 412 395 table \$0-clip 882000;
#X obj 65 426 r~ audio_in;
#X obj 316 188 spigot;
#N canvas 394 208 450 300 line 0;
#X obj 202 47 inlet;
#X obj 116 48 inlet;
#X obj 164 183 outlet~;
#X obj 163 144 line~;
#X obj 202 96 pack 0 5;
#X obj 116 94 pack 1 5;
#X connect 0 0 4 0;
#X connect 1 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X restore 192 455 pd line;
#N canvas 65 85 1215 719 tabindex 0;
#X obj 309 161 timer;
#X obj 308 641 outlet~;
#X obj 402 68 inlet;
#X obj 568 67 inlet;
#X obj 309 68 inlet;
#X obj 308 579 *~ 1;
#X obj 309 403 vline~;
#N canvas 65 85 1215 719 ramp_timing 0;
#X obj 174 308 metro;
#X obj 174 356 pack 1 f;
#X obj 320 422 pack 0 0;
#X obj 462 84 inlet;
#X obj 174 88 inlet;
#X obj 174 531 outlet;
#X text 122 551 ramp information for vline~;
#X obj 422 533 outlet;
#X obj 422 325 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 643 375 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 643 527 outlet;
#X text 351 551 bang on every loop start;
#X text 588 546 bang on every loop end;
#X obj 174 135 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 695 81 inlet;
#X obj 338 186 *, f 4;
#X obj 174 113 t b b f;
#X floatatom 197 142 5 0 0 0 - - -, f 5;
#X obj 269 101 loadbang;
#X msg 269 125 1;
#X obj 695 108 abs;
#X text 639 59 gated difference \, every loop;
#X obj 1032 78 inlet;
#X text 1037 59 clip select;
#X obj 970 234 spigot;
#X floatatom 970 297 5 0 0 0 - - -, f 5;
#X obj 897 255 loadbang;
#X obj 929 82 r speed;
#X msg 897 280 1;
#X msg 936 330 1;
#X obj 952 363 /;
#X obj 338 261 *;
#X floatatom 952 406 5 0 0 0 - - -, f 5;
#X obj 320 358 del;
#X obj 952 523 outlet;
#X obj 338 219 t b f;
#X text 70 65 clip length in ms \, once at recording;
#X text 917 548 inverse play speed;
#X text 447 62 empty_table_bng;
#X msg 56 184 0, f 2;
#X obj 462 112 s \$0-empty_bng;
#X obj 56 156 r \$0-empty_bng;
#X obj 187 244 r \$0-inv_speed;
#X obj 1022 380 s \$0-inv_speed;
#X obj 695 136 s \$0-abs_gated_diff;
#X obj 338 146 r \$0-abs_gated_diff;
#X text 894 60 global play speed;
#X text 371 262 final ramp length in ms;
#X text 724 378 calculate inverse of play speed;
#X msg 46 291 0, f 2;
#X obj 46 236 r \$0-stop_bng;
#X obj 223 380 r \$0-stop_bng;
#X obj 38 365 r \$0-start_bng;
#X obj 1275 342 spigot;
#X text 1271 245 STOP:;
#X text 1271 265 selecting global stop and a specific clip stops the
playing;
#X obj 1275 291 r stop_bng;
#X obj 1275 380 s \$0-stop_bng;
#X obj 1270 144 spigot;
#X text 1266 47 START:;
#X text 1266 67 selecting global start and a specific clip starts the
loop;
#X obj 1270 93 r start_bng;
#X obj 1270 177 s \$0-start_bng;
#X obj 38 401 t b b;
#X obj 70 426 s \$0-stop_bng;
#X obj 46 263 del 5;
#X obj 227 441 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 335 486 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 244 405 del 10;
#X obj 38 466 del 22;
#X connect 0 0 8 0;
#X connect 0 0 33 0;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 1 0 66 0;
#X connect 2 0 5 0;
#X connect 2 0 67 0;
#X connect 3 0 40 0;
#X connect 4 0 16 0;
#X connect 8 0 7 0;
#X connect 9 0 10 0;
#X connect 13 0 0 0;
#X connect 14 0 20 0;
#X connect 15 0 35 0;
#X connect 16 0 13 0;
#X connect 16 1 17 0;
#X connect 16 2 15 1;
#X connect 17 0 15 0;
#X connect 18 0 19 0;
#X connect 19 0 17 0;
#X connect 20 0 44 0;
#X connect 22 0 24 1;
#X connect 22 0 58 1;
#X connect 22 0 53 1;
#X connect 24 0 25 0;
#X connect 25 0 30 1;
#X connect 25 0 29 0;
#X connect 26 0 28 0;
#X connect 27 0 24 0;
#X connect 28 0 25 0;
#X connect 29 0 30 0;
#X connect 30 0 32 0;
#X connect 30 0 43 0;
#X connect 31 0 1 1;
#X connect 31 0 33 1;
#X connect 31 0 0 1;
#X connect 32 0 34 0;
#X connect 33 0 2 0;
#X connect 33 0 9 0;
#X connect 35 0 31 0;
#X connect 35 1 31 1;
#X connect 39 0 0 0;
#X connect 41 0 39 0;
#X connect 42 0 31 0;
#X connect 45 0 15 0;
#X connect 49 0 0 0;
#X connect 50 0 65 0;
#X connect 51 0 68 0;
#X connect 52 0 63 0;
#X connect 53 0 57 0;
#X connect 56 0 53 0;
#X connect 58 0 62 0;
#X connect 61 0 58 0;
#X connect 63 0 69 0;
#X connect 63 1 64 0;
#X connect 65 0 49 0;
#X connect 68 0 2 0;
#X connect 69 0 0 0;
#X restore 309 302 pd ramp_timing;
#X text 138 403 ramp with range 0 to 1;
#X text 262 661 sample precise reading index for tabread4~;
#X obj 945 635 outlet;
#X obj 703 610 r \$0-loop_start;
#X obj 703 638 outlet;
#X text 909 655 loop length in ms;
#X obj 1106 65 r start_marker;
#X obj 906 65 inlet;
#X obj 727 63 r end_marker;
#X obj 308 487 *~;
#X obj 308 520 +~;
#X obj 340 357 s \$0-loop_start;
#N canvas 205 195 926 534 difference 0;
#X obj 216 65 spigot;
#X obj 269 65 spigot;
#X obj 265 177 -;
#X floatatom 216 127 5 0 0 0 - - -, f 5;
#X floatatom 269 128 5 0 0 0 - - -, f 5;
#X floatatom 265 202 5 0 0 0 - - -, f 5;
#X obj 269 147 t b f;
#X obj 166 35 inlet;
#X obj 255 33 inlet;
#X text 153 17 end marker;
#X text 242 16 clip select;
#X obj 348 33 inlet;
#X text 343 16 start marker;
#X obj 69 37 inlet;
#X text 35 16 loop end bang;
#X obj 69 59 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 381 422 5 0 0 0 - - -, f 5;
#X obj 381 333 spigot;
#X msg 204 282 1;
#X obj 204 232 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 165 331 spigot;
#X floatatom 165 422 5 0 0 0 - - -, f 5;
#X msg 420 280 0;
#X text 129 472 gated difference;
#X text 280 472 gated start marker;
#X obj 165 448 outlet;
#X obj 381 447 outlet;
#X obj 420 247 del 2;
#X obj 366 142 s \$0-start_marker;
#X obj 505 280 r \$0-start_marker;
#X obj 265 221 s \$0-difference;
#X obj 36 283 r \$0-difference;
#X obj 69 88 t b b;
#X obj 145 67 loadbang;
#X msg 145 90 1;
#X obj 335 65 loadbang;
#X msg 335 88 0;
#X obj 38 385 loadbang;
#X msg 38 405 1;
#X obj 511 384 loadbang;
#X msg 511 405 0;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 5 0;
#X connect 3 0 2 0;
#X connect 4 0 6 0;
#X connect 4 0 28 0;
#X connect 5 0 30 0;
#X connect 6 0 2 0;
#X connect 6 1 2 1;
#X connect 7 0 0 0;
#X connect 8 0 0 1;
#X connect 8 0 1 1;
#X connect 11 0 1 0;
#X connect 13 0 15 0;
#X connect 15 0 32 0;
#X connect 16 0 26 0;
#X connect 17 0 16 0;
#X connect 18 0 17 1;
#X connect 18 0 20 1;
#X connect 19 0 18 0;
#X connect 19 0 27 0;
#X connect 20 0 21 0;
#X connect 21 0 25 0;
#X connect 22 0 17 1;
#X connect 22 0 20 1;
#X connect 27 0 22 0;
#X connect 29 0 17 0;
#X connect 31 0 20 0;
#X connect 32 0 4 0;
#X connect 32 0 5 0;
#X connect 32 1 19 0;
#X connect 33 0 34 0;
#X connect 34 0 3 0;
#X connect 35 0 36 0;
#X connect 36 0 4 0;
#X connect 37 0 38 0;
#X connect 38 0 21 0;
#X connect 39 0 40 0;
#X connect 40 0 16 0;
#X restore 848 155 pd difference;
#X obj 372 338 s \$0-loop_end_bang;
#X obj 848 225 s \$0-gated_diff;
#X obj 936 192 s \$0-gated_start;
#X obj 355 470 r \$0-gated_diff;
#X obj 355 503 r \$0-gated_start;
#X obj 372 262 r \$0-gated_diff;
#X obj 945 539 *;
#X obj 874 475 abs;
#X obj 874 451 r \$0-gated_diff;
#X obj 945 601 *;
#X text 277 49 rec_start_bng;
#X text 385 48 rec_stop_bng;
#X text 873 46 clip_select_msg;
#X text 44 162 timer measures the clip length in ms;
#X obj 373 178 s \$0-clip_len;
#X obj 1041 454 r \$0-clip_len;
#X obj 445 319 s \$0-inverse_speed;
#X obj 963 577 r \$0-inverse_speed;
#N canvas 65 53 1215 747 num_samples 0;
#X obj 131 86 * 44.1;
#N canvas 522 125 450 300 into_blocks 0;
#X obj 173 101 % 64;
#X obj 146 81 t f f;
#X obj 146 121 -;
#X obj 146 59 int;
#X obj 146 17 inlet;
#X obj 146 167 outlet;
#X text 238 67 to be a multiple of the block size.;
#X text 238 49 Force the length of the tables;
#X text 134 261 Pierre Massat \, Guitar extended \, 2013;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X restore 131 137 pd into_blocks;
#X text 188 88 get number of samples in the clip;
#X text 241 140 force it to be a multiple of the block size to avoid
clicks;
#X obj 131 52 inlet;
#X text 101 29 clip length in ms;
#X obj 131 178 outlet;
#X text 34 199 corrected number of samples in the clip;
#X connect 0 0 1 0;
#X connect 1 0 6 0;
#X connect 4 0 0 0;
#X restore 373 562 pd num_samples;
#X obj 373 538 r \$0-clip_len;
#X text 542 46 empty_table_bng;
#X text 105 302 generates the ramp messages;
#X obj 568 94 s \$0-empty_tab_bng;
#X obj 340 232 r \$0-empty_tab_bng;
#X obj 912 96 s \$0-clip_sel_msg;
#X obj 488 285 r \$0-clip_sel_msg;
#X text 709 43 global loop end;
#X text 1092 41 global loop start;
#X text 957 155 calculate loop length from markers;
#X obj 648 620 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 676 665 periodic loop start bang;
#X obj 1000 477 t b f;
#X obj 672 138 r \$0-loop_end_bang;
#X connect 0 0 7 0;
#X connect 0 0 35 0;
#X connect 2 0 0 1;
#X connect 3 0 43 0;
#X connect 4 0 0 0;
#X connect 5 0 1 0;
#X connect 6 0 17 0;
#X connect 7 0 6 0;
#X connect 7 1 19 0;
#X connect 7 2 21 0;
#X connect 7 3 37 0;
#X connect 11 0 12 0;
#X connect 14 0 20 3;
#X connect 15 0 20 2;
#X connect 15 0 45 0;
#X connect 16 0 20 1;
#X connect 17 0 18 0;
#X connect 18 0 5 0;
#X connect 20 0 22 0;
#X connect 20 1 23 0;
#X connect 24 0 17 1;
#X connect 25 0 18 1;
#X connect 26 0 7 2;
#X connect 27 0 30 0;
#X connect 28 0 27 0;
#X connect 29 0 28 0;
#X connect 30 0 10 0;
#X connect 36 0 52 0;
#X connect 38 0 30 1;
#X connect 39 0 5 1;
#X connect 40 0 39 0;
#X connect 44 0 7 1;
#X connect 46 0 7 3;
#X connect 50 0 12 0;
#X connect 52 0 27 0;
#X connect 52 1 27 1;
#X connect 53 0 20 0;
#X restore 752 476 pd tabindex;
#X text 839 476 index phasor frequency is calculated in here;
#X text 59 395 recording of incoming signal into the loop table:;
#X text 756 46 CLEAR CLIP:;
#X text 293 55 START/END RECORDING MESSAGES:;
#X text 60 376 SIGNAL INPUT:;
#X text 644 380 SIGNAL OUTPUT:;
#X text 293 76 check if specific clip is selected and global record
is enabled.;
#X text 756 66 selecting global clear and a specific clip clears the
table;
#X obj 105 70 inlet;
#X obj 753 510 tabread4~ \$0-clip;
#X text 891 512 loop playback with 4-point interpolation;
#X text 848 582 use new tabindex outlets to create fades with line
;
#X text 849 605 calculate loop length after start/end selection;
#N canvas 123 203 960 534 fades 0;
#X obj 74 44 inlet~;
#X text 11 24 input from tabread4~;
#X obj 228 44 inlet;
#X obj 378 52 inlet;
#X text 372 34 loop length in ms;
#X obj 627 70 spigot;
#X obj 680 70 spigot;
#X floatatom 627 132 5 0 0 0 - - -, f 5;
#X floatatom 680 132 5 0 0 0 - - -, f 5;
#X obj 666 38 inlet;
#X text 653 21 clip select;
#X obj 556 72 loadbang;
#X obj 746 70 loadbang;
#X obj 330 454 outlet~;
#X obj 545 41 r fade_in_time;
#X obj 764 38 r fade_out_time;
#X obj 330 419 *~;
#X obj 347 380 vline~;
#X text 513 22 fade in time 0to1;
#X text 754 21 fade out time 0to1;
#N canvas 277 81 831 719 fade_timing 0;
#X obj 70 40 inlet;
#X obj 273 43 inlet;
#X text 256 22 loop length in ms;
#X obj 224 426 pack 1 f;
#X obj 277 219 *;
#X obj 405 461 pack 0 f;
#X obj 641 284 *;
#X obj 459 301 -;
#X obj 299 516 outlet;
#X obj 521 38 inlet;
#X text 486 20 rel fade in time;
#X obj 664 41 inlet;
#X text 641 21 rel fade out time;
#X obj 70 78 s \$0-startbang;
#X obj 314 202 r \$0-fade_in;
#X obj 521 67 s \$0-fade_in;
#X obj 664 67 s \$0-fade_out;
#X obj 685 267 r \$0-fade_out;
#X obj 273 76 s \$0-loop_length;
#X obj 85 202 r \$0-loop_length;
#X obj 492 255 r \$0-loop_length;
#X obj 459 122 r \$0-startbang;
#X obj 245 184 t b b;
#X obj 405 425 del;
#X obj 459 150 t b b b b;
#X obj 399 167 del 1;
#X text 24 20 periodic loop start bang;
#X obj 386 323 del 1;
#X msg 362 488 0 \$2;
#X msg 231 473 1 \$2;
#X connect 0 0 13 0;
#X connect 1 0 18 0;
#X connect 3 0 29 0;
#X connect 4 0 3 1;
#X connect 5 0 28 0;
#X connect 6 0 5 1;
#X connect 6 0 7 1;
#X connect 7 0 23 1;
#X connect 9 0 15 0;
#X connect 11 0 16 0;
#X connect 14 0 4 1;
#X connect 17 0 6 1;
#X connect 19 0 4 0;
#X connect 20 0 6 0;
#X connect 20 0 7 0;
#X connect 21 0 24 0;
#X connect 22 0 3 0;
#X connect 22 1 4 0;
#X connect 23 0 5 0;
#X connect 24 0 25 0;
#X connect 24 1 27 0;
#X connect 24 2 7 0;
#X connect 24 3 6 0;
#X connect 25 0 22 0;
#X connect 27 0 23 0;
#X connect 28 0 8 0;
#X connect 29 0 8 0;
#X restore 347 233 pd fade_timing;
#X text 177 28 periodic loop start bang;
#X msg 556 95 0.01;
#X msg 746 93 0.01;
#X connect 0 0 16 0;
#X connect 2 0 20 0;
#X connect 3 0 20 1;
#X connect 5 0 7 0;
#X connect 6 0 8 0;
#X connect 7 0 20 2;
#X connect 8 0 20 3;
#X connect 9 0 5 1;
#X connect 9 0 6 1;
#X connect 11 0 22 0;
#X connect 12 0 23 0;
#X connect 14 0 5 0;
#X connect 15 0 6 0;
#X connect 16 0 13 0;
#X connect 17 0 16 1;
#X connect 20 0 17 0;
#X connect 22 0 7 0;
#X connect 23 0 8 0;
#X restore 753 589 pd fades;
#X obj 316 124 r record_enable_msg;
#X obj 760 93 r clear_clip_bng;
#X obj 268 255 s \$0-rec_start_bng;
#X obj 442 256 s \$0-rec_stop_bng;
#X obj 189 536 r \$0-rec_start_bng;
#X obj 337 535 r \$0-rec_stop_bng;
#X obj 192 426 r \$0-rec_start_bng;
#X obj 341 426 r \$0-rec_stop_bng;
#X obj 631 422 r \$0-rec_start_bng;
#X obj 776 422 r \$0-rec_stop_bng;
#X obj 760 180 s \$0-empty_table_bng;
#X obj 761 221 r \$0-empty_table_bng;
#X obj 909 422 r \$0-empty_table_bng;
#X obj 1065 421 r \$0-clip_select_msg;
#X obj 105 156 s \$0-clip_select_msg;
#X obj 799 119 r \$0-clip_select_msg;
#X obj 840 551 r \$0-clip_select_msg;
#X obj 355 155 r \$0-clip_select_msg;
#X obj 753 678 outlet~;
#N canvas 65 105 1215 719 clipvolume 0;
#X obj 439 101 loadbang;
#X obj 529 181 line~;
#X msg 439 139 0.5;
#X obj 529 105 spigot;
#X obj 434 226 *~;
#X obj 49 47 inlet~;
#X obj 435 258 outlet~;
#X obj 568 53 inlet;
#X obj 453 50 r clip_volume;
#X text 420 31 global clip volume;
#X text 571 31 clip_select_msg;
#X text 9 30 clip audio signal;
#X text 382 285 volume controlled signal;
#X obj 529 155 pack 0 5;
#X obj 794 303 spigot;
#X text 790 206 STOP:;
#X text 790 226 selecting global stop and a specific clip stops the
playing;
#X obj 794 252 r stop_bng;
#X obj 789 105 spigot;
#X text 785 8 START:;
#X text 785 28 selecting global start and a specific clip starts the
loop;
#X obj 789 54 r start_bng;
#X obj 789 138 s \$0-start_bang;
#X obj 794 341 s \$0-stop_bang;
#X obj 180 150 *~;
#X obj 311 33 r \$0-stop_bang;
#X obj 163 21 r \$0-start_bang;
#X obj 225 133 vline~;
#X obj 155 55 loadbang;
#X msg 238 85 0 10 \, 1 10 11;
#X connect 0 0 2 0;
#X connect 1 0 4 1;
#X connect 2 0 13 0;
#X connect 3 0 13 0;
#X connect 4 0 6 0;
#X connect 5 0 24 0;
#X connect 7 0 3 1;
#X connect 7 0 18 1;
#X connect 7 0 14 1;
#X connect 8 0 3 0;
#X connect 13 0 1 0;
#X connect 14 0 23 0;
#X connect 17 0 14 0;
#X connect 18 0 22 0;
#X connect 21 0 18 0;
#X connect 24 0 4 0;
#X connect 25 0 29 0;
#X connect 26 0 29 0;
#X connect 27 0 24 1;
#X connect 28 0 29 0;
#X connect 29 0 27 0;
#X restore 752 640 pd clipvolume;
#X obj 761 252 pack 0 \$0;
#X msg 761 281 \; \$2-clip const 0;
#X connect 0 0 27 0;
#X connect 0 1 28 0;
#X connect 1 0 5 0;
#X connect 2 0 5 0;
#X connect 3 0 39 0;
#X connect 4 0 35 0;
#X connect 7 0 2 0;
#X connect 8 0 0 0;
#X connect 9 0 2 1;
#X connect 10 0 20 0;
#X connect 10 1 24 1;
#X connect 10 2 24 2;
#X connect 19 0 3 0;
#X connect 20 0 24 0;
#X connect 24 0 44 0;
#X connect 25 0 8 0;
#X connect 26 0 4 0;
#X connect 29 0 5 0;
#X connect 30 0 1 0;
#X connect 31 0 9 0;
#X connect 32 0 9 1;
#X connect 33 0 10 0;
#X connect 34 0 10 1;
#X connect 36 0 45 0;
#X connect 37 0 10 2;
#X connect 38 0 10 3;
#X connect 40 0 4 1;
#X connect 41 0 24 3;
#X connect 41 0 44 1;
#X connect 42 0 8 1;
#X connect 44 0 43 0;
#X coords 0 -1 1 1 35 35 2 100 100;
